# Admin Panel ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ

ãƒ¡ãƒ«ã‚«ãƒªãƒªã‚µãƒ¼ãƒãƒ„ãƒ¼ãƒ«ç®¡ç†ç”»é¢ã®ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã§ã™ã€‚

## ãƒ†ã‚¹ãƒˆæ§‹æˆ

### ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
__tests__/
â”œâ”€â”€ components/           # ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ StatsCard.test.tsx
â”‚   â””â”€â”€ ProductList.test.tsx
â”œâ”€â”€ api/                  # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ version.test.ts
â”‚   â””â”€â”€ create-amazon-tsv.test.ts
â”œâ”€â”€ lib/                  # ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–¢æ•°ã®ãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ utils.test.ts
â”œâ”€â”€ app/                  # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ page.test.tsx
â”œâ”€â”€ integration/          # çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ dashboard-flow.test.tsx
â”œâ”€â”€ setup/               # ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â””â”€â”€ test-utils.tsx
â””â”€â”€ README.md
```

## ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰
```bash
# ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test:watch

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test:coverage
```

### å€‹åˆ¥ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ
npm test StatsCard.test.tsx

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè¡Œ
npm test -- --testPathPattern="components"

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å®Ÿè¡Œ
npm test -- --testNamePattern="æ­£ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹"
```

## ãƒ†ã‚¹ãƒˆç¨®åˆ¥

### ğŸ”§ ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
å€‹åˆ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„é–¢æ•°ã®å˜ä½“ãƒ†ã‚¹ãƒˆ

**å¯¾è±¡:**
- `StatsCard` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `ProductList` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ  
- `formatCurrency` ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°

**ãƒ†ã‚¹ãƒˆè¦³ç‚¹:**
- ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æ­£ã—ã„è¡¨ç¤º
- ã‚¨ãƒ©ãƒ¼å‡¦ç†
- ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹
- ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ

### ğŸŒ APIãƒ†ã‚¹ãƒˆ
Next.js App Router APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ

**å¯¾è±¡:**
- `/api/version` - ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±å–å¾—
- `/api/create-amazon-tsv` - Amazonå‡ºå“ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ

**ãƒ†ã‚¹ãƒˆè¦³ç‚¹:**
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ãƒ‡ãƒ¼ã‚¿å¤‰æ›
- ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ

### ğŸ“± ãƒšãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆ
ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ

**å¯¾è±¡:**
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ (`app/page.tsx`)

**ãƒ†ã‚¹ãƒˆè¦³ç‚¹:**
- ãƒ‡ãƒ¼ã‚¿å–å¾—ã¨è¡¨ç¤º
- çµ±è¨ˆè¨ˆç®—
- ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰
- ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹

### ğŸ”— çµ±åˆãƒ†ã‚¹ãƒˆ
è¤‡æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ„ã¿åˆã‚ã›ãŸå‹•ä½œãƒ†ã‚¹ãƒˆ

**å¯¾è±¡:**
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å…¨ä½“ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
- çŠ¶æ…‹ç®¡ç†

**ãƒ†ã‚¹ãƒˆè¦³ç‚¹:**
- ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®å‹•ä½œ
- ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“

## ãƒ¢ãƒƒã‚­ãƒ³ã‚°æˆ¦ç•¥

### ğŸ—„ï¸ Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
```typescript
const mockSupabase = createSupabaseMock('success') // æˆåŠŸã‚·ãƒŠãƒªã‚ª
const mockSupabase = createSupabaseMock('error')   // ã‚¨ãƒ©ãƒ¼ã‚·ãƒŠãƒªã‚ª
const mockSupabase = createSupabaseMock('empty')   // ç©ºãƒ‡ãƒ¼ã‚¿ã‚·ãƒŠãƒªã‚ª
```

### ğŸ–¼ï¸ Next.jsã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `next/image` - imgè¦ç´ ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- `next/router` - ãƒ«ãƒ¼ã‚¿ãƒ¼æ©Ÿèƒ½ã‚’ãƒ¢ãƒƒã‚¯

### ğŸŒ ç’°å¢ƒå¤‰æ•°
```typescript
setupTestEnvironment('production') // æœ¬ç•ªç’°å¢ƒãƒ¢ãƒ¼ãƒ‰
setupTestEnvironment('demo')       // ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰
```

## ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼

### ğŸ“Š ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
```typescript
const product = createMockProduct({
  title: 'ã‚«ã‚¹ã‚¿ãƒ å•†å“å',
  price: 15000,
  is_filtered: true
})
```

### ğŸ¯ ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ãƒ³ãƒ€ãƒ¼
```typescript
import { render, screen } from '../setup/test-utils'

render(<MyComponent />)
```

### â±ï¸ éåŒæœŸå‡¦ç†
```typescript
await waitFor(() => {
  expect(screen.getByText('ãƒ‡ãƒ¼ã‚¿')).toBeInTheDocument()
})
```

## ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

| ç¨®åˆ¥ | ç›®æ¨™ã‚«ãƒãƒ¬ãƒƒã‚¸ |
|------|---------------|
| Statements | > 90% |
| Branches | > 85% |
| Functions | > 90% |
| Lines | > 90% |

## ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### GitHub Actionsè¨­å®šä¾‹
```yaml
- name: Run tests
  run: npm test -- --coverage --watchAll=false

- name: Upload coverage
  uses: codecov/codecov-action@v3
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### âœ… æ¨å¥¨äº‹é …
- **AAA ãƒ‘ã‚¿ãƒ¼ãƒ³**: Arrange, Act, Assert
- **æ˜ç¢ºãªãƒ†ã‚¹ãƒˆå**: ä½•ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã‚‹ã‹ãŒåˆ†ã‹ã‚‹åå‰
- **ç‹¬ç«‹æ€§**: ãƒ†ã‚¹ãƒˆé–“ã§çŠ¶æ…‹ã‚’å…±æœ‰ã—ãªã„
- **ãƒªã‚¢ãƒ«ãªãƒ‡ãƒ¼ã‚¿**: å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«è¿‘ã„ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿

### âŒ é¿ã‘ã‚‹ã¹ãäº‹é …
- ãƒ†ã‚¹ãƒˆã®ä¸­ã§ã®ãƒ†ã‚¹ãƒˆï¼ˆnested describeï¼‰
- è¤‡æ•°ã®æ©Ÿèƒ½ã‚’ä¸€ã¤ã®ãƒ†ã‚¹ãƒˆã§ãƒ†ã‚¹ãƒˆã™ã‚‹
- å®Ÿè£…è©³ç´°ã®ãƒ†ã‚¹ãƒˆ
- å¤–éƒ¨ä¾å­˜ã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

**1. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„**
```bash
# jest.config.jsã®moduleNameMappingã‚’ç¢ºèª
moduleNameMapping: {
  '^@/(.*)$': '<rootDir>/$1'
}
```

**2. éåŒæœŸãƒ†ã‚¹ãƒˆã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**
```typescript
// ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“ã‚’å»¶é•·
await waitFor(() => {
  expect(element).toBeInTheDocument()
}, { timeout: 5000 })
```

**3. Next.js Imageæœ€é©åŒ–ã‚¨ãƒ©ãƒ¼**
```typescript
// jest.setup.jsã§Imageã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ¢ãƒƒã‚¯
jest.mock('next/image', () => ({
  __esModule: true,
  default: (props) => <img {...props} />
}))
```

## å‚è€ƒè³‡æ–™

- [Testing Library Documentation](https://testing-library.com/)
- [Jest Documentation](https://jestjs.io/)
- [Next.js Testing Guide](https://nextjs.org/docs/testing)
- [React Testing Best Practices](https://kentcdodds.com/blog/common-mistakes-with-react-testing-library)